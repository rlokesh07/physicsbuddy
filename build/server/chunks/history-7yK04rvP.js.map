{"version":3,"file":"history-7yK04rvP.js","sources":["../../../.svelte-kit/adapter-node/chunks/history.js"],"sourcesContent":["const canUseDOM = () => typeof window !== \"undefined\" && \"document\" in window && \"location\" in window;\nconst getLocation = (source) => {\n  return {\n    ...source.location,\n    state: source.history.state,\n    key: source.history.state && source.history.state.key || \"initial\"\n  };\n};\nconst createHistory = (source) => {\n  const listeners = [];\n  let location = getLocation(source);\n  return {\n    get location() {\n      return location;\n    },\n    listen(listener) {\n      listeners.push(listener);\n      const popstateListener = () => {\n        location = getLocation(source);\n        listener({ location, action: \"POP\" });\n      };\n      source.addEventListener(\"popstate\", popstateListener);\n      return () => {\n        source.removeEventListener(\"popstate\", popstateListener);\n        const index = listeners.indexOf(listener);\n        listeners.splice(index, 1);\n      };\n    },\n    navigate(to, { state, replace = false, preserveScroll = false, blurActiveElement = true } = {}) {\n      state = { ...state, key: Date.now() + \"\" };\n      try {\n        if (replace)\n          source.history.replaceState(state, \"\", to);\n        else\n          source.history.pushState(state, \"\", to);\n      } catch (e) {\n        source.location[replace ? \"replace\" : \"assign\"](to);\n      }\n      location = getLocation(source);\n      listeners.forEach(\n        (listener) => listener({ location, action: \"PUSH\", preserveScroll })\n      );\n      if (blurActiveElement)\n        document.activeElement.blur();\n    }\n  };\n};\nconst createMemorySource = (initialPathname = \"/\") => {\n  let index = 0;\n  const stack = [{ pathname: initialPathname, search: \"\" }];\n  const states = [];\n  return {\n    get location() {\n      return stack[index];\n    },\n    addEventListener(name, fn) {\n    },\n    removeEventListener(name, fn) {\n    },\n    history: {\n      get entries() {\n        return stack;\n      },\n      get index() {\n        return index;\n      },\n      get state() {\n        return states[index];\n      },\n      pushState(state, _, uri) {\n        const [pathname, search = \"\"] = uri.split(\"?\");\n        index++;\n        stack.push({ pathname, search });\n        states.push(state);\n      },\n      replaceState(state, _, uri) {\n        const [pathname, search = \"\"] = uri.split(\"?\");\n        stack[index] = { pathname, search };\n        states[index] = state;\n      }\n    }\n  };\n};\ncreateHistory(\n  canUseDOM() ? window : createMemorySource()\n);\n"],"names":[],"mappings":"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"}